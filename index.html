<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>××“×¨×™×š: ×“×©×‘×•×¨×“ Observability ×œ×‘×•×˜×™ ×˜×œ×’×¨×</title>
    <style>
        :root {
            --primary-color: #0088cc;
            --secondary-color: #2ecc71;
            --warning-color: #f39c12;
            --danger-color: #e74c3c;
            --dark-bg: #1a1a2e;
            --card-bg: #16213e;
            --text-color: #eee;
            --code-bg: #0f0f23;
            --border-color: #3d5a80;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Arial, sans-serif;
            background: linear-gradient(135deg, var(--dark-bg) 0%, #0f0f23 100%);
            color: var(--text-color);
            line-height: 1.8;
            min-height: 100vh;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 40px 20px;
        }

        header {
            text-align: center;
            padding: 60px 20px;
            background: linear-gradient(135deg, var(--primary-color) 0%, #005577 100%);
            margin-bottom: 40px;
            border-radius: 0 0 30px 30px;
            box-shadow: 0 10px 40px rgba(0, 136, 204, 0.3);
        }

        header h1 {
            font-size: 2.8em;
            margin-bottom: 15px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        header p {
            font-size: 1.3em;
            opacity: 0.9;
        }

        .badge {
            display: inline-block;
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 0.85em;
            margin: 5px;
        }

        .badge-prometheus { background: #e6522c; }
        .badge-mongodb { background: #4db33d; }
        .badge-grafana { background: #f46800; }
        .badge-telegram { background: #0088cc; }

        section {
            background: var(--card-bg);
            border-radius: 15px;
            padding: 35px;
            margin-bottom: 30px;
            border: 1px solid var(--border-color);
            box-shadow: 0 5px 25px rgba(0,0,0,0.3);
        }

        h2 {
            color: var(--primary-color);
            font-size: 1.8em;
            margin-bottom: 25px;
            padding-bottom: 15px;
            border-bottom: 3px solid var(--primary-color);
            display: flex;
            align-items: center;
            gap: 15px;
        }

        h2 .icon {
            font-size: 1.2em;
        }

        h3 {
            color: var(--secondary-color);
            font-size: 1.3em;
            margin: 25px 0 15px 0;
        }

        h4 {
            color: var(--warning-color);
            margin: 20px 0 10px 0;
        }

        p {
            margin-bottom: 15px;
        }

        code {
            background: var(--code-bg);
            padding: 3px 8px;
            border-radius: 5px;
            font-family: 'Consolas', 'Monaco', monospace;
            font-size: 0.9em;
            color: #7fdbca;
        }

        pre {
            background: var(--code-bg);
            padding: 20px;
            border-radius: 10px;
            overflow-x: auto;
            margin: 20px 0;
            border: 1px solid var(--border-color);
            direction: ltr;
            text-align: left;
        }

        pre code {
            padding: 0;
            background: none;
            color: #c3cee3;
            line-height: 1.6;
        }

        .comment { color: #6a9955; }
        .keyword { color: #c586c0; }
        .string { color: #ce9178; }
        .function { color: #dcdcaa; }
        .variable { color: #9cdcfe; }
        .number { color: #b5cea8; }

        table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            background: var(--code-bg);
            border-radius: 10px;
            overflow: hidden;
        }

        th, td {
            padding: 15px;
            text-align: right;
            border-bottom: 1px solid var(--border-color);
        }

        th {
            background: var(--primary-color);
            color: white;
            font-weight: 600;
        }

        tr:hover {
            background: rgba(0, 136, 204, 0.1);
        }

        .alert-box {
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
            display: flex;
            align-items: flex-start;
            gap: 15px;
        }

        .alert-info {
            background: rgba(0, 136, 204, 0.15);
            border-right: 4px solid var(--primary-color);
        }

        .alert-warning {
            background: rgba(243, 156, 18, 0.15);
            border-right: 4px solid var(--warning-color);
        }

        .alert-success {
            background: rgba(46, 204, 113, 0.15);
            border-right: 4px solid var(--secondary-color);
        }

        .alert-danger {
            background: rgba(231, 76, 60, 0.15);
            border-right: 4px solid var(--danger-color);
        }

        .architecture-diagram {
            background: var(--code-bg);
            padding: 30px;
            border-radius: 15px;
            margin: 25px 0;
            direction: ltr;
            text-align: center;
            font-family: monospace;
            font-size: 0.95em;
            line-height: 1.4;
            overflow-x: auto;
            white-space: pre;
        }

        .file-tree {
            background: var(--code-bg);
            padding: 20px;
            border-radius: 10px;
            font-family: monospace;
            direction: ltr;
            text-align: left;
        }

        .file-tree .folder { color: #f39c12; }
        .file-tree .file { color: #3498db; }

        ul, ol {
            margin: 15px 30px;
        }

        li {
            margin: 8px 0;
        }

        .metric-card {
            display: inline-block;
            background: var(--code-bg);
            padding: 15px 25px;
            border-radius: 10px;
            margin: 10px;
            border: 1px solid var(--border-color);
            text-align: center;
        }

        .metric-card .value {
            font-size: 2em;
            color: var(--secondary-color);
            font-weight: bold;
        }

        .metric-card .label {
            font-size: 0.9em;
            opacity: 0.8;
        }

        .grid-2 {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }

        .feature-card {
            background: var(--code-bg);
            padding: 25px;
            border-radius: 10px;
            border: 1px solid var(--border-color);
        }

        .feature-card h4 {
            margin-top: 0;
        }

        .step-number {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 35px;
            height: 35px;
            background: var(--primary-color);
            border-radius: 50%;
            margin-left: 10px;
            font-weight: bold;
        }

        .toc {
            background: var(--code-bg);
            padding: 25px;
            border-radius: 10px;
            margin-bottom: 30px;
        }

        .toc h3 {
            margin-top: 0;
            color: var(--text-color);
        }

        .toc ul {
            list-style: none;
            margin: 0;
        }

        .toc li {
            padding: 8px 0;
            border-bottom: 1px solid var(--border-color);
        }

        .toc a {
            color: var(--primary-color);
            text-decoration: none;
            transition: color 0.3s;
        }

        .toc a:hover {
            color: var(--secondary-color);
        }

        .endpoint-card {
            background: var(--code-bg);
            border-radius: 10px;
            margin: 15px 0;
            overflow: hidden;
            border: 1px solid var(--border-color);
        }

        .endpoint-header {
            display: flex;
            align-items: center;
            gap: 15px;
            padding: 15px 20px;
            background: rgba(0, 136, 204, 0.1);
        }

        .method {
            padding: 5px 12px;
            border-radius: 5px;
            font-weight: bold;
            font-size: 0.85em;
        }

        .method-get { background: #2ecc71; color: white; }
        .method-post { background: #3498db; color: white; }

        .endpoint-path {
            font-family: monospace;
            color: var(--text-color);
            direction: ltr;
        }

        .endpoint-body {
            padding: 20px;
        }

        footer {
            text-align: center;
            padding: 40px 20px;
            color: rgba(255,255,255,0.6);
            border-top: 1px solid var(--border-color);
            margin-top: 40px;
        }

        .screenshot-container {
            background: var(--code-bg);
            border: 2px dashed var(--border-color);
            border-radius: 10px;
            min-height: 200px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--text-color);
            opacity: 0.7;
        }

        .screenshot-container img {
            border-radius: 8px 8px 0 0;
        }

        .screenshot-container img[src]:not([src=""]) + .placeholder {
            display: none;
        }

        .feature-card img {
            border-radius: 8px 8px 0 0;
            border-bottom: 1px solid var(--border-color);
        }

        @media (max-width: 768px) {
            header h1 {
                font-size: 2em;
            }

            section {
                padding: 20px;
            }

            .grid-2 {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <header>
        <h1>×“×©×‘×•×¨×“ Observability ×œ×‘×•×˜×™ ×˜×œ×’×¨×</h1>
        <p>××“×¨×™×š ××§×™×£ ×œ× ×™×˜×•×¨, ××™×¡×•×£ ××˜×¨×™×§×•×ª ×•×”×ª×¨××•×ª ×‘×–××Ÿ ×××ª</p>
        <div style="margin-top: 20px;">
            <span class="badge badge-prometheus">Prometheus</span>
            <span class="badge badge-mongodb">MongoDB</span>
            <span class="badge badge-grafana">Grafana</span>
            <span class="badge badge-telegram">Telegram API</span>
        </div>
    </header>

    <div class="container">
        <!-- Table of Contents -->
        <nav class="toc">
            <h3>×ª×•×›×Ÿ ×¢× ×™×™× ×™×</h3>
            <ul>
                <li><a href="#overview">1. ×¡×§×™×¨×” ×›×œ×œ×™×ª</a></li>
                <li><a href="#architecture">2. ××¨×›×™×˜×§×˜×•×¨×”</a></li>
                <li><a href="#metrics">3. ××˜×¨×™×§×•×ª ×•×§×•×œ×§×¦×™×”</a></li>
                <li><a href="#dashboard">4. ××‘× ×” ×”×“×©×‘×•×¨×“</a></li>
                <li><a href="#alerts">5. ××¢×¨×›×ª ×”×”×ª×¨××•×ª</a></li>
                <li><a href="#api">6. API Endpoints</a></li>
                <li><a href="#configuration">7. ×§×•× ×¤×™×’×•×¨×¦×™×”</a></li>
                <li><a href="#files">8. ×§×‘×¦×™× ×—×©×•×‘×™×</a></li>
                <li><a href="#grafana">9. ××™× ×˜×’×¨×¦×™×™×ª Grafana</a></li>
                <li><a href="#best-practices">10. Best Practices</a></li>
            </ul>
        </nav>

        <!-- Section 1: Overview -->
        <section id="overview">
            <h2><span class="icon">ğŸ“Š</span> ×¡×§×™×¨×” ×›×œ×œ×™×ª</h2>

            <p>
                ××“×¨×™×š ×–×” ××¦×™×’ ×›×™×¦×“ ×œ×‘× ×•×ª ××¢×¨×›×ª Observability ××§×™×¤×” ×œ×‘×•×˜×™ ×˜×œ×’×¨×, ×”×›×•×œ×œ×ª ××™×¡×•×£ ××˜×¨×™×§×•×ª ×‘×–××Ÿ ×××ª,
                ×–×™×”×•×™ ×× ×•××œ×™×•×ª, × ×™×”×•×œ ×”×ª×¨××•×ª ×•×™×›×•×œ×•×ª ×× ×œ×™×–×” ××ª×§×“××•×ª.
            </p>

            <div class="alert-box alert-warning">
                <span style="font-size: 1.5em;">ğŸ“¦</span>
                <div>
                    <strong>×ª×œ×•×™×•×ª (Dependencies):</strong> ××¢×¨×›×ª ×–×• ××¡×ª××›×ª ×¢×œ ×”-Stack ×”×˜×›× ×•×œ×•×’×™ ×”×‘×:
                    <ul style="margin-top: 10px; margin-bottom: 0;">
                        <li><strong>Python</strong> - ×©×¤×ª ×”×ª×›× ×•×ª ×”×¨××©×™×ª (Flask ×œ×××©×§ ×”-Web)</li>
                        <li><strong>MongoDB</strong> - ××—×¡×•×Ÿ ×”×ª×¨××•×ª ×•××˜×¨×™×§×•×ª ×”×™×¡×˜×•×¨×™×•×ª</li>
                        <li><strong>Prometheus</strong> - ××™×¡×•×£ ×•×—×©×™×¤×ª ××˜×¨×™×§×•×ª</li>
                        <li><strong>Grafana</strong> - ×•×™×–×•××œ×™×–×¦×™×” ×•×“×©×‘×•×¨×“×™× (××•×¤×¦×™×•× ×œ×™)</li>
                    </ul>
                </div>
            </div>

            <div class="alert-box alert-info">
                <span style="font-size: 1.5em;">ğŸ”§</span>
                <div>
                    <strong>×”×ª×××” ××™×©×™×ª:</strong> ×”×§×•×“ ×‘××“×¨×™×š ××›×™×œ ×©××•×ª ×¡×¤×¦×™×¤×™×™× ×›××• <code>codebot_handler</code>. 
                    ×‘×¢×ª ×”×©×™××•×© ×‘××“×¨×™×š, ×”×—×œ×™×¤×• ××ª ×”×©××•×ª ×”××œ×• ×œ×©× ×”×‘×•×˜ ×©×œ×›× (×œ×“×•×’××”: <code>mybot_handler</code>).
                </div>
            </div>

            <div class="grid-2">
                <div class="feature-card">
                    <h4>××™×¡×•×£ ××˜×¨×™×§×•×ª</h4>
                    <p>×¡×¤×™×¨×ª ×¢×“×›×•× ×™× ××˜×œ×’×¨×, ××“×™×“×ª latency ×©×œ handlers, ×•××¢×§×‘ ××—×¨ ×©×’×™××•×ª - ×”×›×œ ×‘×–××Ÿ ×××ª.</p>
                </div>
                <div class="feature-card">
                    <h4>×”×ª×¨××•×ª ×—×›××•×ª</h4>
                    <p>××¢×¨×›×ª adaptive thresholds ×¢× EWMA ×œ×× ×™×¢×ª false positives ×•×”×ª×¨××•×ª ××•×ª×××•×ª ××™×©×™×ª.</p>
                </div>
                <div class="feature-card">
                    <h4>×“×©×‘×•×¨×“ ××™× ×˜×¨××§×˜×™×‘×™</h4>
                    <p>×××©×§ ×•×•×‘ ×¢× ×’×¨×¤×™×, ×¤×™×œ×˜×¨×™×, ×•×ª×¦×•×’×ª timeline ×œ× ×™×ª×•×— ××™×¨×•×¢×™×.</p>
                </div>
                <div class="feature-card">
                    <h4>AI-Powered Analysis</h4>
                    <p>×”×¡×‘×¨×™× ××•×˜×•××˜×™×™× ×œ×”×ª×¨××•×ª ×¢× × ×™×ª×•×— ×¡×™×‘×” ×©×•×¨×©×™×ª ×•×”××œ×¦×•×ª ×œ×¤×ª×¨×•×Ÿ.</p>
                </div>
            </div>

            <div class="alert-box alert-info">
                <span style="font-size: 1.5em;">ğŸ’¡</span>
                <div>
                    <strong>×˜×™×¤:</strong> ×”××¢×¨×›×ª ×©×•××¨×ª × ×ª×•× ×™× ×‘-MongoDB ×¢× TTL ×©×œ 30 ×™×•×, ×•××¦×™×¢×” cache ×—×›× ×œ×‘×™×¦×•×¢×™× ××•×¤×˜×™××œ×™×™×.
                </div>
            </div>
        </section>

        <!-- Section 2: Architecture -->
        <section id="architecture">
            <h2><span class="icon">ğŸ—ï¸</span> ××¨×›×™×˜×§×˜×•×¨×”</h2>

            <h3>×–×¨×™××ª ×”× ×ª×•× ×™×</h3>
            <div class="architecture-diagram">
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           TELEGRAM BOT UPDATE FLOW                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚   Telegram   â”‚â”€â”€â”€â”€â”€â–¶â”‚   main.py    â”‚â”€â”€â”€â”€â”€â–¶â”‚      metrics.py          â”‚
   â”‚   Update     â”‚      â”‚ _pre_update  â”‚      â”‚ telegram_updates_total   â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                â”‚                          â”‚
                                â–¼                          â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚  Handler Logic   â”‚      â”‚      Prometheus          â”‚
                    â”‚ (process update) â”‚      â”‚   (scrape endpoint)      â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                â”‚                          â”‚
                                â–¼                          â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚  alert_manager   â”‚      â”‚        Grafana           â”‚
                    â”‚ (check thresholds)â”‚     â”‚   (visualizations)       â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                â”‚
                                â–¼
           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
           â”‚                    â”‚                    â”‚
           â–¼                    â–¼                    â–¼
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚   MongoDB    â”‚    â”‚   Telegram   â”‚    â”‚    Slack     â”‚
   â”‚alerts_storageâ”‚    â”‚  Forwarding  â”‚    â”‚  Forwarding  â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â–¼
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚              OBSERVABILITY DASHBOARD                  â”‚
   â”‚         /admin/observability                          â”‚
   â”‚                                                       â”‚
   â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
   â”‚  â”‚  KPIs   â”‚  â”‚ Graphs  â”‚  â”‚ Alerts  â”‚  â”‚ Replay  â”‚  â”‚
   â”‚  â”‚  Cards  â”‚  â”‚ Charts  â”‚  â”‚  Table  â”‚  â”‚Timeline â”‚  â”‚
   â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            </div>

            <h3>×¨×›×™×‘×™× ×¢×™×§×¨×™×™×</h3>
            <table>
                <thead>
                    <tr>
                        <th>×¨×›×™×‘</th>
                        <th>×ª×¤×§×™×“</th>
                        <th>×˜×›× ×•×œ×•×’×™×”</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>Metrics Collector</td>
                        <td>××™×¡×•×£ ××˜×¨×™×§×•×ª ××›×œ ×”×‘×§×©×•×ª ×•×”×¢×“×›×•× ×™×</td>
                        <td>Prometheus Counters/Histograms</td>
                    </tr>
                    <tr>
                        <td>Alert Manager</td>
                        <td>×–×™×”×•×™ ×× ×•××œ×™×•×ª ×•×”×¤×¢×œ×ª ×”×ª×¨××•×ª</td>
                        <td>Python + EWMA Algorithm</td>
                    </tr>
                    <tr>
                        <td>Storage Layer</td>
                        <td>×©××™×¨×ª ×”×ª×¨××•×ª ×•××˜×¨×™×§×•×ª ×”×™×¡×˜×•×¨×™×•×ª</td>
                        <td>MongoDB + TTL Indexes</td>
                    </tr>
                    <tr>
                        <td>Dashboard API</td>
                        <td>×”×’×©×ª × ×ª×•× ×™× ×œ×××©×§ ×”××©×ª××©</td>
                        <td>Flask REST API</td>
                    </tr>
                    <tr>
                        <td>Visualization</td>
                        <td>×’×¨×¤×™× ×•×ª×¦×•×’×•×ª ××™× ×˜×¨××§×˜×™×‘×™×•×ª</td>
                        <td>Chart.js + Grafana</td>
                    </tr>
                </tbody>
            </table>
        </section>

        <!-- Section 3: Metrics -->
        <section id="metrics">
            <h2><span class="icon">ğŸ“ˆ</span> ××˜×¨×™×§×•×ª ×•×§×•×œ×§×¦×™×”</h2>

            <h3>××˜×¨×™×§×•×ª ×œ×™×‘×” ×©×œ ×”×‘×•×˜</h3>
            <table>
                <thead>
                    <tr>
                        <th>×©× ×”××˜×¨×™×§×”</th>
                        <th>×¡×•×’</th>
                        <th>Labels</th>
                        <th>×ª×™××•×¨</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><code>telegram_updates_total</code></td>
                        <td>Counter</td>
                        <td>type, status</td>
                        <td>×¡×•×¤×¨ ××ª ×›×œ ×”×¢×“×›×•× ×™× ×”× ×›× ×¡×™× ××˜×œ×’×¨×</td>
                    </tr>
                    <tr>
                        <td><code>{yourbot}_handler_requests_total</code></td>
                        <td>Counter</td>
                        <td>handler_name, status</td>
                        <td>××¡×¤×¨ ×”×¤×¢×œ×•×ª ×©×œ ×›×œ handler</td>
                    </tr>
                    <tr>
                        <td><code>{yourbot}_handler_latency_seconds</code></td>
                        <td>Histogram</td>
                        <td>handler_name</td>
                        <td>×–××Ÿ ×ª×’×•×‘×” ×©×œ handlers</td>
                    </tr>
                    <tr>
                        <td><code>operation_latency_seconds</code></td>
                        <td>Histogram</td>
                        <td>operation, repo</td>
                        <td>latency ×©×œ ×¤×¢×•×œ×•×ª ×©×•× ×•×ª</td>
                    </tr>
                    <tr>
                        <td><code>errors_total</code></td>
                        <td>Counter</td>
                        <td>code</td>
                        <td>×¡×¤×™×¨×ª ×©×’×™××•×ª ×œ×¤×™ ×§×•×“</td>
                    </tr>
                </tbody>
            </table>

            <h3>×”×’×“×¨×ª ××˜×¨×™×§×•×ª - metrics.py</h3>
            <div class="alert-box alert-info" style="margin-bottom: 15px;">
                <span style="font-size: 1.2em;">ğŸ’¡</span>
                <div>
                    <strong>×©×™××• ×œ×‘:</strong> ×”×—×œ×™×¤×• ××ª <code>codebot_handler</code> ×œ×©× ×”×‘×•×˜ ×©×œ×›× (×œ××©×œ: <code>mybot_handler</code>).
                </div>
            </div>
            <pre><code><span class="keyword">from</span> prometheus_client <span class="keyword">import</span> Counter, Histogram

<span class="comment"># Counter ×œ××¢×§×‘ ××—×¨ ×¢×“×›×•× ×™ ×˜×œ×’×¨×</span>
<span class="variable">telegram_updates_total</span> = Counter(
    <span class="string">'telegram_updates_total'</span>,
    <span class="string">'Total number of Telegram updates received'</span>,
    [<span class="string">'type'</span>, <span class="string">'status'</span>]
)

<span class="comment"># Histogram ×œ××“×™×“×ª latency</span>
<span class="comment"># ×©× ×• ××ª ×”×§×™×“×•××ª 'codebot' ×œ×©× ×”×‘×•×˜ ×©×œ×›×</span>
<span class="variable">handler_latency</span> = Histogram(
    <span class="string">'codebot_handler_latency_seconds'</span>,  <span class="comment"># â† ×©× ×• ×œ-yourbot_handler_latency_seconds</span>
    <span class="string">'Handler response time in seconds'</span>,
    [<span class="string">'handler_name'</span>],
    buckets=[<span class="number">.005</span>, <span class="number">.01</span>, <span class="number">.025</span>, <span class="number">.05</span>, <span class="number">.1</span>, <span class="number">.25</span>, <span class="number">.5</span>, <span class="number">1</span>, <span class="number">2.5</span>, <span class="number">5</span>, <span class="number">10</span>]
)</code></pre>

            <h3>××™×¡×•×£ ××˜×¨×™×§×•×ª ×‘×¢×“×›×•×Ÿ - main.py</h3>
            <pre><code><span class="keyword">async def</span> <span class="function">_pre_update</span>(self, update: Update, context: CallbackContext):
    <span class="string">"""Intercept every update for metrics collection"""</span>

    <span class="comment"># ×§×‘×™×¢×ª ×¡×•×’ ×”×¢×“×›×•×Ÿ</span>
    <span class="keyword">if</span> update.message:
        update_type = <span class="string">'message'</span>
    <span class="keyword">elif</span> update.callback_query:
        update_type = <span class="string">'callback_query'</span>
    <span class="keyword">elif</span> update.inline_query:
        update_type = <span class="string">'inline_query'</span>
    <span class="keyword">else</span>:
        update_type = <span class="string">'other'</span>

    <span class="comment"># ×¢×“×›×•×Ÿ ×”××˜×¨×™×§×”</span>
    <span class="variable">telegram_updates_total</span>.labels(
        type=update_type,
        status=<span class="string">'received'</span>
    ).inc()</code></pre>

            <h3>×¡×•×’×™ ×¢×“×›×•× ×™× × ×ª××›×™×</h3>
            <ul>
                <li><strong>message</strong> - ×”×•×“×¢×•×ª ×˜×§×¡×˜ ×¨×’×™×œ×•×ª</li>
                <li><strong>callback_query</strong> - ×œ×—×™×¦×•×ª ×¢×œ ×›×¤×ª×•×¨×™ inline</li>
                <li><strong>inline_query</strong> - ×©××™×œ×ª×•×ª inline</li>
                <li><strong>other</strong> - ×¡×•×’×™ ×¢×“×›×•× ×™× ××—×¨×™× (edited messages, etc.)</li>
            </ul>
        </section>

        <!-- Section 4: Dashboard -->
        <section id="dashboard">
            <h2><span class="icon">ğŸ–¥ï¸</span> ××‘× ×” ×”×“×©×‘×•×¨×“</h2>

            <p>×”×“×©×‘×•×¨×“ × ×’×™×© ×‘×›×ª×•×‘×ª <code>/admin/observability</code> (××• ×‘×›×ª×•×‘×ª ××—×¨×ª ×œ×¤×™ ×”×’×“×¨×ª×›×) ×•××¦×™×¢ ××’×•×•×Ÿ ×ª×¦×•×’×•×ª ×•×›×œ×™× ×œ× ×™×˜×•×¨.</p>

            <h3>×¦×™×œ×•××™ ××¡×š ××“×©×‘×•×¨×“ ×œ×“×•×’××”</h3>
            <!-- 
                ×”×•×¨××•×ª ×œ×”×•×¡×¤×ª ×¦×™×œ×•××™ ××¡×š:
                ×©××¨×• ××ª ×§×‘×¦×™ ×”×ª××•× ×•×ª ×‘××•×ª×” ×ª×™×§×™×™×” ×¢× ×”×§×•×‘×¥ index.html:
                - screenshot-dashboard-main.png (×“×©×‘×•×¨×“ ×¨××©×™)
                - screenshot-alerts-history.png (×”×™×¡×˜×•×¨×™×™×ª ×”×ª×¨××•×ª)
            -->
            <div class="grid-2" style="margin-bottom: 25px;">
                <div class="feature-card" style="padding: 0; overflow: hidden;">
                    <img src="screenshot-dashboard-main.png" alt="×“×©×‘×•×¨×“ Observability ×¨××©×™" style="width: 100%; height: auto; display: block;" onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';">
                    <div class="screenshot-container" style="display: none; min-height: 250px;">
                        <span>ğŸ“Š ×“×©×‘×•×¨×“ ×¨××©×™ - screenshot-dashboard-main.png</span>
                    </div>
                    <div style="padding: 15px;">
                        <h4 style="margin-top: 0;">×“×©×‘×•×¨×“ ×¨××©×™</h4>
                        <p style="margin-bottom: 0;">×ª×¦×•×’×ª KPIs, ×’×¨×¤×™× ×©×œ ×–×× ×™ ×ª×’×•×‘×” ×•×”×ª×¨××•×ª ×œ×¤×™ ×—×•××¨×”, ×•×˜×‘×œ×ª endpoints ××™×˜×™×™×.</p>
                    </div>
                </div>
                <div class="feature-card" style="padding: 0; overflow: hidden;">
                    <img src="screenshot-alerts-history.png" alt="×”×™×¡×˜×•×¨×™×™×ª ×”×ª×¨××•×ª" style="width: 100%; height: auto; display: block;" onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';">
                    <div class="screenshot-container" style="display: none; min-height: 250px;">
                        <span>ğŸš¨ ×”×™×¡×˜×•×¨×™×™×ª ×”×ª×¨××•×ª - screenshot-alerts-history.png</span>
                    </div>
                    <div style="padding: 15px;">
                        <h4 style="margin-top: 0;">×”×™×¡×˜×•×¨×™×™×ª ×”×ª×¨××•×ª</h4>
                        <p style="margin-bottom: 0;">×ª×¦×•×’×ª ×”×ª×¨××•×ª ×¢× ×¤×™×œ×˜×¨×™×, ×’×¨×£ timeline, ×•××¤×©×¨×•×™×•×ª Quick Fix ×•×”×¡×‘×¨ AI.</p>
                    </div>
                </div>
            </div>

            <h3>××‘× ×” ×”×××©×§</h3>
            <div class="architecture-diagram">
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      OBSERVABILITY DASHBOARD                                 â”‚
â”‚                      /admin/observability                                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚   TIME RANGE SELECTOR                                                  â”‚  â”‚
â”‚  â”‚   [ 1h ] [ 24h ] [ 7d ] [ 30d ] [ Custom Date Range ]                 â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚   CRITICAL   â”‚  â”‚   ANOMALY    â”‚  â”‚  DEPLOYMENT  â”‚  â”‚   DEPLOY     â”‚    â”‚
â”‚  â”‚    ALERTS    â”‚  â”‚    COUNT     â”‚  â”‚    EVENTS    â”‚  â”‚   IMPACT     â”‚    â”‚
â”‚  â”‚     (24h)    â”‚  â”‚   (range)    â”‚  â”‚              â”‚  â”‚ (avg latency)â”‚    â”‚
â”‚  â”‚      12      â”‚  â”‚      47      â”‚  â”‚       3      â”‚  â”‚    245ms     â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚      ALERT COUNT GRAPH          â”‚  â”‚     RESPONSE TIME GRAPH         â”‚  â”‚
â”‚  â”‚   (stacked by severity)         â”‚  â”‚      (avg / max / p95)          â”‚  â”‚
â”‚  â”‚         â–„â–„â–„â–„                    â”‚  â”‚              â•±â•²                 â”‚  â”‚
â”‚  â”‚       â–„â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–„                   â”‚  â”‚         â•±â•²__â•±  â•²__â•±â•²           â”‚  â”‚
â”‚  â”‚    â–„â–„â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–„                â”‚  â”‚     ___â•±              â•²___      â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                      ERROR RATE GRAPH (%)                            â”‚   â”‚
â”‚  â”‚                    â•±â•²      â•±â•²                                        â”‚   â”‚
â”‚  â”‚               ____â•±  â•²____â•±  â•²____                                   â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚   SLOW ENDPOINTS TABLE                                               â”‚   â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚
â”‚  â”‚   Endpoint/Method    â”‚ Avg (ms) â”‚ Max (ms) â”‚     Request Count      â”‚   â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚
â”‚  â”‚   POST /api/process  â”‚   450    â”‚   2300   â”‚        1,234           â”‚   â”‚
â”‚  â”‚   GET /api/status    â”‚   120    â”‚    890   â”‚        5,678           â”‚   â”‚
â”‚  â”‚   POST /webhook      â”‚   380    â”‚   1500   â”‚        3,456           â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚   ALERTS HISTORY TABLE                                               â”‚   â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚
â”‚  â”‚ Timestamp  â”‚   Name   â”‚ Severity â”‚  Summary  â”‚  Type  â”‚   Actions   â”‚   â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚
â”‚  â”‚ 10:45:23   â”‚ High CPU â”‚ critical â”‚ CPU > 90% â”‚ system â”‚ [Quick Fix] â”‚   â”‚
â”‚  â”‚ 10:42:11   â”‚ Latency  â”‚ warning  â”‚ P95 > 2s  â”‚ perf   â”‚ [Quick Fix] â”‚   â”‚
â”‚  â”‚ 10:38:05   â”‚ Error    â”‚ anomaly  â”‚ 5xx spike â”‚ error  â”‚ [Explain]   â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚  â”‚ Filters: [Severity â–¼] [Type â–¼] [Endpoint â–¼]                          â”‚   â”‚
â”‚  â”‚ Pagination: [< 1 2 3 4 5 >]                                          â”‚   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            </div>

            <h3>KPI Cards</h3>
            <div class="grid-2">
                <div class="feature-card">
                    <h4>Critical Alerts (24h)</h4>
                    <p>××¡×¤×¨ ×”×”×ª×¨××•×ª ×”×§×¨×™×˜×™×•×ª ×‘-24 ×”×©×¢×•×ª ×”××—×¨×•× ×•×ª. ××•×¦×’ ×‘××“×•× ×›×©×™×© ×™×•×ª×¨ ×-0.</p>
                </div>
                <div class="feature-card">
                    <h4>Anomaly Count</h4>
                    <p>××¡×¤×¨ ×”×× ×•××œ×™×•×ª ×©×–×•×”×• ×‘×˜×•×•×— ×”×–××Ÿ ×”× ×‘×—×¨.</p>
                </div>
                <div class="feature-card">
                    <h4>Deployment Events</h4>
                    <p>××¡×¤×¨ ×”-deployments ×©×‘×•×¦×¢×• ×‘×ª×§×•×¤×” ×”× ×‘×—×¨×ª.</p>
                </div>
                <div class="feature-card">
                    <h4>Deployment Impact</h4>
                    <p>×××•×¦×¢ ×”-latency ×œ××—×¨ deployments ××—×¨×•× ×™×.</p>
                </div>
            </div>

            <h3>Incident Replay</h3>
            <p>
                × ×’×™×© ×‘×›×ª×•×‘×ª <code>/admin/observability/replay</code>, ××¡×¤×§ ×ª×¦×•×’×ª timeline ××—×•×“×”
                ×©××©×œ×‘×ª ×”×ª×¨××•×ª, deployments ×•-stories ×œ× ×™×ª×•×— ×§×•×¨×œ×¦×™×•×ª.
            </p>
        </section>

        <!-- Section 5: Alerts -->
        <section id="alerts">
            <h2><span class="icon">ğŸš¨</span> ××¢×¨×›×ª ×”×”×ª×¨××•×ª</h2>

            <h3>×¨××•×ª ×—×•××¨×”</h3>
            <table>
                <thead>
                    <tr>
                        <th>×¨××”</th>
                        <th>×ª×™××•×¨</th>
                        <th>×“×•×’×××•×ª</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><span style="color: #e74c3c; font-weight: bold;">critical</span></td>
                        <td>×‘×¢×™×•×ª ×§×¨×™×˜×™×•×ª ×”×“×•×¨×©×•×ª ×˜×™×¤×•×œ ××™×™×“×™</td>
                        <td>×©×™×¨×•×ª ×œ× ×–××™×Ÿ, ×©×’×™××•×ª ××¡×™×‘×™×•×ª</td>
                    </tr>
                    <tr>
                        <td><span style="color: #9b59b6; font-weight: bold;">anomaly</span></td>
                        <td>×”×ª× ×”×’×•×ª ×—×¨×™×’×” ×©×–×•×”×ª×” ××•×˜×•××˜×™×ª</td>
                        <td>×¢×œ×™×” ×—×“×” ×‘-error rate, latency spike</td>
                    </tr>
                    <tr>
                        <td><span style="color: #f39c12; font-weight: bold;">warning</span></td>
                        <td>××–×”×¨×•×ª ×©×™×© ×œ×‘×“×•×§</td>
                        <td>×§×¨×•×‘ ×œ×—×¨×™×’×ª threshold, ××©××‘×™× ×’×‘×•×”×™×</td>
                    </tr>
                    <tr>
                        <td><span style="color: #3498db; font-weight: bold;">info</span></td>
                        <td>××™×“×¢ ×›×œ×œ×™</td>
                        <td>deployment events, configuration changes</td>
                    </tr>
                </tbody>
            </table>

            <h3>×–×¨×™××ª ×”×”×ª×¨××•×ª</h3>
            <pre><code><span class="comment"># alert_manager.py - Adaptive Thresholds</span>
<span class="keyword">class</span> <span class="function">AlertManager</span>:
    <span class="keyword">def</span> <span class="function">note_request</span>(self, latency: <span class="variable">float</span>, is_error: <span class="variable">bool</span>):
        <span class="string">"""Record a request for threshold calculation"""</span>
        self._ewma_latency.update(latency)
        self._error_window.append(is_error)

    <span class="keyword">def</span> <span class="function">check_and_emit_alerts</span>(self):
        <span class="string">"""Check thresholds and emit alerts if needed"""</span>
        <span class="keyword">if</span> self._current_error_rate > self._threshold:
            emit_internal_alert(
                name=<span class="string">"High Error Rate"</span>,
                severity=<span class="string">"anomaly"</span>,
                summary=<span class="string">f"Error rate: {self._current_error_rate:.1%}"</span>
            )</code></pre>

            <h3>×©××™×¨×ª ×”×ª×¨××•×ª - alerts_storage.py</h3>
            <pre><code><span class="keyword">async def</span> <span class="function">record_alert</span>(
    name: <span class="variable">str</span>,
    severity: <span class="variable">str</span>,
    summary: <span class="variable">str</span>,
    alert_type: <span class="variable">str</span> = <span class="string">"system"</span>,
    metadata: <span class="variable">dict</span> = <span class="keyword">None</span>
):
    <span class="string">"""Store alert in MongoDB with TTL"""</span>
    doc = {
        <span class="string">"timestamp"</span>: datetime.utcnow(),
        <span class="string">"name"</span>: name,
        <span class="string">"severity"</span>: severity,
        <span class="string">"summary"</span>: summary,
        <span class="string">"type"</span>: alert_type,
        <span class="string">"metadata"</span>: metadata <span class="keyword">or</span> {},
        <span class="string">"expire_at"</span>: datetime.utcnow() + timedelta(days=<span class="number">30</span>)
    }
    <span class="keyword">await</span> alerts_collection.insert_one(doc)</code></pre>

            <h3>×”×¢×‘×¨×ª ×”×ª×¨××•×ª - alert_forwarder.py</h3>
            <p>×”××¢×¨×›×ª ××¢×‘×™×¨×” ×”×ª×¨××•×ª ×œ×™×¢×“×™× ×©×•× ×™×:</p>
            <ul>
                <li><strong>Telegram</strong> - ×”×•×“×¢×•×ª ×œ×¦'××˜ ×™×™×¢×•×“×™</li>
                <li><strong>Slack</strong> - ××™× ×˜×’×¨×¦×™×” ×¢× ×¢×¨×•×¦×™ Slack</li>
                <li><strong>Grafana</strong> - ×”×•×¡×¤×ª annotations ×œ×’×¨×¤×™×</li>
            </ul>
        </section>

        <!-- Section 6: API -->
        <section id="api">
            <h2><span class="icon">ğŸ”Œ</span> API Endpoints</h2>

            <div class="endpoint-card">
                <div class="endpoint-header">
                    <span class="method method-get">GET</span>
                    <span class="endpoint-path">/api/observability/alerts</span>
                </div>
                <div class="endpoint-body">
                    <p>×©×œ×™×¤×ª ×¨×©×™××ª ×”×ª×¨××•×ª ×¢× ××¤×©×¨×•×™×•×ª ×¡×™× ×•×Ÿ</p>
                    <h4>Query Parameters:</h4>
                    <ul>
                        <li><code>severity</code> - critical, anomaly, warning, info</li>
                        <li><code>type</code> - ×¡×•×’ ×”×”×ª×¨××”</li>
                        <li><code>endpoint</code> - endpoint ×¡×¤×¦×™×¤×™</li>
                        <li><code>start_time</code> / <code>end_time</code> - ×˜×•×•×— ×–×× ×™×</li>
                        <li><code>page</code> / <code>per_page</code> - pagination (max 200)</li>
                    </ul>
                </div>
            </div>

            <div class="endpoint-card">
                <div class="endpoint-header">
                    <span class="method method-get">GET</span>
                    <span class="endpoint-path">/api/observability/aggregations</span>
                </div>
                <div class="endpoint-body">
                    <p>×©×œ×™×¤×ª ×¡×™×›×•××™ KPI ×•-endpoints ××™×˜×™×™×</p>
                    <h4>Query Parameters:</h4>
                    <ul>
                        <li><code>start_time</code> / <code>end_time</code> - ×˜×•×•×— ×–×× ×™×</li>
                        <li><code>limit</code> - ××¡×¤×¨ endpoints ××™×˜×™×™× (1-20)</li>
                    </ul>
                </div>
            </div>

            <div class="endpoint-card">
                <div class="endpoint-header">
                    <span class="method method-get">GET</span>
                    <span class="endpoint-path">/api/observability/timeseries</span>
                </div>
                <div class="endpoint-body">
                    <p>× ×ª×•× ×™ time series ×œ×’×¨×¤×™×</p>
                    <h4>Query Parameters:</h4>
                    <ul>
                        <li><code>metrics</code> - alerts_count, response_time, error_rate</li>
                        <li><code>granularity</code> - 5m, 1h, 6h, 12h</li>
                    </ul>
                </div>
            </div>

            <div class="endpoint-card">
                <div class="endpoint-header">
                    <span class="method method-get">GET</span>
                    <span class="endpoint-path">/api/observability/replay</span>
                </div>
                <div class="endpoint-body">
                    <p>Timeline ××—×•×“ ×œ×”×ª×¨××•×ª, deployments ×•-stories</p>
                </div>
            </div>

            <div class="endpoint-card">
                <div class="endpoint-header">
                    <span class="method method-post">POST</span>
                    <span class="endpoint-path">/api/observability/alerts/ai_explain</span>
                </div>
                <div class="endpoint-body">
                    <p>×”×¡×‘×¨ AI ×œ×”×ª×¨××” ×¡×¤×¦×™×¤×™×ª</p>
                    <h4>Request Body:</h4>
                    <pre><code>{
    <span class="string">"alert_uid"</span>: <span class="string">"abc123"</span>,
    <span class="string">"context"</span>: { ... }
}</code></pre>
                    <h4>Response:</h4>
                    <pre><code>{
    <span class="string">"root_cause"</span>: <span class="string">"Database connection pool exhausted"</span>,
    <span class="string">"suggested_actions"</span>: [<span class="string">"Increase pool size"</span>, <span class="string">"Check for leaks"</span>],
    <span class="string">"related_signals"</span>: [...]
}</code></pre>
                </div>
            </div>

            <div class="endpoint-card">
                <div class="endpoint-header">
                    <span class="method method-get">GET</span>
                    <span class="endpoint-path">/api/observability/runbook/{event_id}</span>
                </div>
                <div class="endpoint-body">
                    <p>×©×œ×™×¤×ª runbook/playbook ×œ×”×ª×¨××”</p>
                </div>
            </div>

            <div class="endpoint-card">
                <div class="endpoint-header">
                    <span class="method method-get">GET</span>
                    <span class="endpoint-path">/api/observability/export</span>
                </div>
                <div class="endpoint-body">
                    <p>×™×™×¦×•× JSON snapshot ××œ×</p>
                </div>
            </div>
        </section>

        <!-- Section 7: Configuration -->
        <section id="configuration">
            <h2><span class="icon">âš™ï¸</span> ×§×•× ×¤×™×’×•×¨×¦×™×”</h2>

            <h3>××©×ª× ×™ ×¡×‘×™×‘×”</h3>
            <pre><code><span class="comment"># Metrics & Alerts Storage</span>
<span class="variable">METRICS_DB_ENABLED</span>=<span class="keyword">true</span>
<span class="variable">ALERTS_DB_ENABLED</span>=<span class="keyword">true</span>
<span class="variable">MONGODB_URL</span>=<span class="string">mongodb://localhost:27017/yourbot</span>  <span class="comment"># ×©× ×• ×œ-DB ×©×œ×›×</span>
<span class="variable">METRICS_COLLECTION</span>=<span class="string">service_metrics</span>
<span class="variable">ALERTS_COLLECTION</span>=<span class="string">alerts_log</span>

<span class="comment"># Telegram Alerts Forwarding</span>
<span class="variable">ALERT_TELEGRAM_BOT_TOKEN</span>=<span class="string">your-bot-token</span>
<span class="variable">ALERT_TELEGRAM_CHAT_ID</span>=<span class="string">-100123456789</span>

<span class="comment"># Dashboard AI Explanations</span>
<span class="variable">OBS_AI_EXPLAIN_URL</span>=<span class="string">https://api.example.com/explain</span>
<span class="variable">OBS_AI_EXPLAIN_TOKEN</span>=<span class="string">your-api-token</span>
<span class="variable">OBS_AI_EXPLAIN_CACHE_TTL</span>=<span class="number">600</span>

<span class="comment"># Runbook Configuration</span>
<span class="variable">OBSERVABILITY_RUNBOOK_PATH</span>=<span class="string">config/observability_runbooks.yml</span>
<span class="variable">OBS_RUNBOOK_STATE_TTL</span>=<span class="number">14400</span>

<span class="comment"># Grafana Integration</span>
<span class="variable">GRAFANA_URL</span>=<span class="string">https://grafana.example.com</span>
<span class="variable">GRAFANA_API_KEY</span>=<span class="string">your-grafana-key</span></code></pre>

            <h3>×§×‘×¦×™ ×§×•× ×¤×™×’×•×¨×¦×™×”</h3>
            <div class="grid-2">
                <div class="feature-card">
                    <h4>config/alerts.yml</h4>
                    <pre><code><span class="variable">log_aggregation</span>:
  <span class="variable">window_size</span>: <span class="number">300</span>
  <span class="variable">cooldown</span>: <span class="number">600</span>
  <span class="variable">min_count</span>: <span class="number">5</span></code></pre>
                </div>
                <div class="feature-card">
                    <h4>config/error_signatures.yml</h4>
                    <pre><code><span class="variable">patterns</span>:
  - <span class="variable">name</span>: <span class="string">database_error</span>
    <span class="variable">regex</span>: <span class="string">"Connection.*refused"</span>
    <span class="variable">severity</span>: <span class="string">critical</span></code></pre>
                </div>
            </div>

            <h3>Cache TTL Settings</h3>
            <table>
                <thead>
                    <tr>
                        <th>Cache</th>
                        <th>TTL</th>
                        <th>×ª×™××•×¨</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>Alert Cache</td>
                        <td>120 ×©× ×™×•×ª</td>
                        <td>Cache ×‘×–×™×›×¨×•×Ÿ ×œ×”×ª×¨××•×ª</td>
                    </tr>
                    <tr>
                        <td>Aggregation Cache</td>
                        <td>150 ×©× ×™×•×ª</td>
                        <td>Cache ×œ-KPI aggregations</td>
                    </tr>
                    <tr>
                        <td>Timeseries Cache</td>
                        <td>150 ×©× ×™×•×ª</td>
                        <td>Cache ×œ× ×ª×•× ×™ time series</td>
                    </tr>
                    <tr>
                        <td>AI Explanation Cache</td>
                        <td>600 ×©× ×™×•×ª</td>
                        <td>Cache ×œ×”×¡×‘×¨×™ AI (per alert_uid)</td>
                    </tr>
                    <tr>
                        <td>Database TTL</td>
                        <td>30 ×™×•×</td>
                        <td>××—×™×§×” ××•×˜×•××˜×™×ª ×-MongoDB</td>
                    </tr>
                </tbody>
            </table>

            <h3>Rate Limiting</h3>
            <div class="alert-box alert-warning">
                <span style="font-size: 1.5em;">âš ï¸</span>
                <div>
                    <strong>×”×’×‘×œ×•×ª:</strong> 50 ×‘×§×©×•×ª ×œ×©×¢×” / 200 ×‘×§×©×•×ª ×œ×™×•× ×œ××©×ª××©
                </div>
            </div>
        </section>

        <!-- Section 8: Files -->
        <section id="files">
            <h2><span class="icon">ğŸ“</span> ×§×‘×¦×™× ×—×©×•×‘×™×</h2>

            <h3>Data Collection & Storage</h3>
            <table>
                <thead>
                    <tr>
                        <th>×§×•×‘×¥</th>
                        <th>×ª×¤×§×™×“</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><code>metrics.py</code></td>
                        <td>×”×’×“×¨×ª ××˜×¨×™×§×•×ª Prometheus ×•×¤×•× ×§×¦×™×•×ª ×¨×™×©×•×</td>
                    </tr>
                    <tr>
                        <td><code>monitoring/metrics_storage.py</code></td>
                        <td>×©××™×¨×ª ××˜×¨×™×§×•×ª ×‘-MongoDB</td>
                    </tr>
                    <tr>
                        <td><code>monitoring/alerts_storage.py</code></td>
                        <td>×©××™×¨×” ×•×©×œ×™×¤×” ×©×œ ×”×ª×¨××•×ª</td>
                    </tr>
                    <tr>
                        <td><code>monitoring/error_signatures.py</code></td>
                        <td>×¡×™×•×•×’ ××•×˜×•××˜×™ ×©×œ ×©×’×™××•×ª</td>
                    </tr>
                    <tr>
                        <td><code>monitoring/log_analyzer.py</code></td>
                        <td>××’×¨×’×¦×™×” ×•× ×™×ª×•×— ×œ×•×’×™×</td>
                    </tr>
                    <tr>
                        <td><code>alert_manager.py</code></td>
                        <td>×‘×“×™×§×ª thresholds ×•×”×¤×§×ª ×”×ª×¨××•×ª</td>
                    </tr>
                </tbody>
            </table>

            <h3>Observability Stack</h3>
            <table>
                <thead>
                    <tr>
                        <th>×§×•×‘×¥</th>
                        <th>×ª×¤×§×™×“</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><code>services/observability_dashboard.py</code></td>
                        <td>××’×¨×’×¦×™×™×ª × ×ª×•× ×™× ×œ×“×©×‘×•×¨×“</td>
                    </tr>
                    <tr>
                        <td><code>alert_forwarder.py</code></td>
                        <td>× ×™×ª×•×‘ ×”×ª×¨××•×ª ×œ-Telegram/Slack/Grafana</td>
                    </tr>
                    <tr>
                        <td><code>internal_alerts.py</code></td>
                        <td>× ×™×”×•×œ ×”×ª×¨××•×ª ×¤× ×™××™</td>
                    </tr>
                    <tr>
                        <td><code>observability.py</code></td>
                        <td>Structured logging ×•××™× ×˜×’×¨×¦×™×™×ª Sentry</td>
                    </tr>
                    <tr>
                        <td><code>observability_otel.py</code></td>
                        <td>×”×’×“×¨×•×ª OpenTelemetry</td>
                    </tr>
                </tbody>
            </table>

            <h3>Frontend</h3>
            <table>
                <thead>
                    <tr>
                        <th>×§×•×‘×¥</th>
                        <th>×ª×¤×§×™×“</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><code>webapp/templates/admin_observability.html</code></td>
                        <td>×“×©×‘×•×¨×“ ×”-Observability ×”×¨××©×™</td>
                    </tr>
                    <tr>
                        <td><code>webapp/templates/observability_replay.html</code></td>
                        <td>×ª×¦×•×’×ª Incident Replay</td>
                    </tr>
                    <tr>
                        <td><code>docker/grafana/provisioning/dashboards/yourbot-dashboard.json</code></td>
                        <td>×§×•× ×¤×™×’×•×¨×¦×™×™×ª ×“×©×‘×•×¨×“ Grafana</td>
                    </tr>
                </tbody>
            </table>

            <h3>××‘× ×” ×”×ª×™×§×™×•×ª</h3>
            <p style="margin-bottom: 10px;">×œ×”×œ×Ÿ ××‘× ×” ×ª×™×§×™×•×ª ×œ×“×•×’××” - ×”×ª××™××• ×œ×¤×¨×•×™×§×˜ ×©×œ×›×:</p>
            <div class="file-tree">
<span class="folder">YourBot/</span>  <span class="comment"># ×©× ×”×¤×¨×•×™×§×˜ ×©×œ×›×</span>
â”œâ”€â”€ <span class="file">metrics.py</span>                    <span class="comment"># Prometheus metrics definitions</span>
â”œâ”€â”€ <span class="file">alert_manager.py</span>              <span class="comment"># Adaptive threshold checking</span>
â”œâ”€â”€ <span class="file">alert_forwarder.py</span>            <span class="comment"># Alert routing</span>
â”œâ”€â”€ <span class="file">internal_alerts.py</span>            <span class="comment"># In-memory alert buffer</span>
â”œâ”€â”€ <span class="file">observability.py</span>              <span class="comment"># Structured logging</span>
â”œâ”€â”€ <span class="file">observability_otel.py</span>         <span class="comment"># OpenTelemetry setup</span>
â”œâ”€â”€ <span class="file">main.py</span>                       <span class="comment"># Bot entry point + metrics</span>
â”‚
â”œâ”€â”€ <span class="folder">monitoring/</span>
â”‚   â”œâ”€â”€ <span class="file">metrics_storage.py</span>        <span class="comment"># MongoDB metrics persistence</span>
â”‚   â”œâ”€â”€ <span class="file">alerts_storage.py</span>         <span class="comment"># Alert persistence & querying</span>
â”‚   â”œâ”€â”€ <span class="file">error_signatures.py</span>       <span class="comment"># Error classification</span>
â”‚   â””â”€â”€ <span class="file">log_analyzer.py</span>           <span class="comment"># Log aggregation</span>
â”‚
â”œâ”€â”€ <span class="folder">services/</span>
â”‚   â””â”€â”€ <span class="file">observability_dashboard.py</span> <span class="comment"># Dashboard data aggregation</span>
â”‚
â”œâ”€â”€ <span class="folder">webapp/</span>
â”‚   â”œâ”€â”€ <span class="file">app.py</span>                    <span class="comment"># Flask API endpoints</span>
â”‚   â””â”€â”€ <span class="folder">templates/</span>
â”‚       â”œâ”€â”€ <span class="file">admin_observability.html</span>  <span class="comment"># Main dashboard</span>
â”‚       â””â”€â”€ <span class="file">observability_replay.html</span> <span class="comment"># Incident replay</span>
â”‚
â”œâ”€â”€ <span class="folder">config/</span>
â”‚   â”œâ”€â”€ <span class="file">alerts.yml</span>                <span class="comment"># Alert thresholds</span>
â”‚   â”œâ”€â”€ <span class="file">error_signatures.yml</span>      <span class="comment"># Error patterns</span>
â”‚   â”œâ”€â”€ <span class="file">observability_runbooks.yml</span> <span class="comment"># Playbooks</span>
â”‚   â””â”€â”€ <span class="file">alert_quick_fixes.json</span>    <span class="comment"># Quick fix definitions</span>
â”‚
â””â”€â”€ <span class="folder">docker/grafana/provisioning/</span>
    â””â”€â”€ <span class="folder">dashboards/</span>
        â””â”€â”€ <span class="file">yourbot-dashboard.json</span> <span class="comment"># Grafana dashboard</span>
            </div>
        </section>

        <!-- Section 9: Grafana -->
        <section id="grafana">
            <h2><span class="icon">ğŸ“Š</span> ××™× ×˜×’×¨×¦×™×™×ª Grafana</h2>

            <p>
                ×”×“×©×‘×•×¨×“ ×‘-Grafana ××¦×™×’ ××˜×¨×™×§×•×ª Prometheus ×‘×–××Ÿ ×××ª ×•×××¤×©×¨ × ×™×ª×•×— ××¢××™×§ ×©×œ ×‘×™×¦×•×¢×™ ×”×‘×•×˜.
            </p>

            <h3>Panels ×¢×™×§×¨×™×™×</h3>
            <div class="grid-2">
                <div class="feature-card">
                    <h4>Telegram Updates Rate</h4>
                    <pre><code><span class="function">rate</span>(telegram_updates_total{
  status=<span class="string">"received"</span>
}[<span class="number">1m</span>])</code></pre>
                    <p>×§×¦×‘ ×”×¢×“×›×•× ×™× ×”× ×›× ×¡×™× ××˜×œ×’×¨× ×œ×“×§×”</p>
                </div>
                <div class="feature-card">
                    <h4>Handler Requests/sec</h4>
                    <pre><code><span class="comment"># ×©× ×• ××ª ×”×§×™×“×•××ª ×œ×©× ×”×‘×•×˜ ×©×œ×›×</span>
<span class="function">sum</span>(<span class="function">rate</span>(
  yourbot_handler_requests_total[<span class="number">1m</span>]
))</code></pre>
                    <p>×¡×”"×› ×‘×§×©×•×ª ×œ-handlers ×‘×©× ×™×™×”</p>
                </div>
                <div class="feature-card">
                    <h4>Latency P95</h4>
                    <pre><code><span class="function">histogram_quantile</span>(<span class="number">0.95</span>,
  <span class="function">rate</span>(operation_latency_seconds_bucket
    [<span class="number">5m</span>])
)</code></pre>
                    <p>×¤×¨×¦× ×˜×™×œ 95 ×©×œ ×–×× ×™ ×ª×’×•×‘×”</p>
                </div>
                <div class="feature-card">
                    <h4>Error Rate %</h4>
                    <pre><code><span class="function">sum</span>(errors_total) /
<span class="function">sum</span>(requests_total) * <span class="number">100</span></code></pre>
                    <p>××—×•×– ×”×©×’×™××•×ª ××¡×š ×”×‘×§×©×•×ª</p>
                </div>
            </div>

            <h3>×”×’×“×¨×ª Data Source</h3>
            <pre><code><span class="comment"># docker/grafana/provisioning/datasources/prometheus.yml</span>
<span class="variable">apiVersion</span>: <span class="number">1</span>
<span class="variable">datasources</span>:
  - <span class="variable">name</span>: <span class="string">Prometheus</span>
    <span class="variable">type</span>: <span class="string">prometheus</span>
    <span class="variable">url</span>: <span class="string">http://prometheus:9090</span>
    <span class="variable">isDefault</span>: <span class="keyword">true</span>
    <span class="variable">access</span>: <span class="string">proxy</span></code></pre>
        </section>

        <!-- Section 10: Best Practices -->
        <section id="best-practices">
            <h2><span class="icon">âœ…</span> Best Practices</h2>

            <h3>1. ××˜×¨×™×§×•×ª</h3>
            <ul>
                <li>×”×©×ª××© ×‘-labels ××©××¢×•×ª×™×™× ××š ×”×™×× ×¢ ×-high cardinality</li>
                <li>×”×’×“×¨ buckets ××ª××™××™× ×œ-Histograms ×‘×”×ª×× ×œ-SLOs</li>
                <li>×”×•×¡×£ ××˜×¨×™×§×•×ª ×—×“×©×•×ª ×‘×”×“×¨×’×” ×•×‘×“×•×§ ××ª ×”×”×©×¤×¢×” ×¢×œ storage</li>
            </ul>

            <h3>2. ×”×ª×¨××•×ª</h3>
            <ul>
                <li>×”×©×ª××© ×‘-adaptive thresholds ×œ×× ×™×¢×ª false positives</li>
                <li>×”×’×“×¨ cooldown ××ª××™× ×œ×× ×™×¢×ª alert fatigue</li>
                <li>×›×ª×•×‘ runbooks ×‘×¨×•×¨×™× ×œ×›×œ ×¡×•×’ ×”×ª×¨××”</li>
                <li>×‘×“×•×§ ××ª ×”-alert routing ×‘×¡×‘×™×‘×ª staging ×§×•×“×</li>
            </ul>

            <h3>3. ×‘×™×¦×•×¢×™×</h3>
            <ul>
                <li>× ×¦×œ ××ª ×”-cache layer - ×¨×•×‘ ×”× ×ª×•× ×™× ×œ× ×¦×¨×™×›×™× ×œ×”×™×•×ª real-time</li>
                <li>×”×©×ª××© ×‘-aggregations ×‘××§×•× ×©×œ×™×¤×•×ª raw data</li>
                <li>×”×’×“×¨ TTL ××ª××™× - 30 ×™×•× ×‘×“"×› ××¡×¤×™×§</li>
                <li>×¢×§×•×‘ ××—×¨ ×’×•×“×œ ×”-collections ×‘-MongoDB</li>
            </ul>

            <h3>4. Incident Response</h3>
            <ul>
                <li>×”×©×ª××© ×‘-Incident Replay ×œ× ×™×ª×•×— post-mortem</li>
                <li>×ª×¢×“ ××ª ×”-quick fixes ×©×¢×•×‘×“×™× ×œ×©×™××•×© ×—×•×–×¨</li>
                <li>×”×•×¡×£ annotations ×‘-Grafana ×œ××™×¨×•×¢×™× ×—×©×•×‘×™×</li>
            </ul>

            <div class="alert-box alert-success">
                <span style="font-size: 1.5em;">ğŸ’¡</span>
                <div>
                    <strong>×˜×™×¤ ××§×¦×•×¢×™:</strong> ×”×©×ª××© ×‘-AI Explain ×œ× ×™×ª×•×— ××”×™×¨ ×©×œ ×”×ª×¨××•×ª ××•×¨×›×‘×•×ª.
                    ×”××¢×¨×›×ª ×œ×•××“×ª ××”×§×•× ×˜×§×¡×˜ ×•××¡×¤×§×ª ×”××œ×¦×•×ª ×¨×œ×•×•× ×˜×™×•×ª.
                </div>
            </div>

            <h3>5. Security</h3>
            <ul>
                <li>×”×’×Ÿ ×¢×œ ×”-API endpoints ×¢× authentication</li>
                <li>××œ ×ª×©××•×¨ ××™×“×¢ ×¨×’×™×© ×‘××˜×¨×™×§×•×ª ××• ×”×ª×¨××•×ª</li>
                <li>×”×’×“×¨ rate limiting ×œ×× ×™×¢×ª abuse</li>
                <li>×”×©×ª××© ×‘-HTTPS ×œ×›×œ ×”×ª×§×©×•×¨×ª</li>
            </ul>
        </section>

        <footer>
            <p>××“×¨×™×š ×“×©×‘×•×¨×“ Observability ×œ×‘×•×˜×™ ×˜×œ×’×¨×</p>
            <p style="margin-top: 10px;">× ×•×¦×¨ ×¢×œ ×‘×¡×™×¡ ×”××™××•×© ×‘×¤×¨×•×™×§×˜ <a href="https://code-keeper-webapp.onrender.com" target="_blank" style="color: var(--primary-color);">CodeKeeper</a></p>
        </footer>
    </div>
</body>
</html>
